<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Search Flights</title>
    <style>
        .airport-container {
            margin-bottom: 15px;
        }

        #airport-list-container {
            border: 1px solid #ccc;
            padding: 10px;
            display: none;
        }

        #airport-list div {
            cursor: pointer;
            border-bottom: 1px solid #eee;
            padding: 5px 0;
        }

        #airport-list div:hover {
            background-color: #f5f5f5;
        }
    </style>
</head>
<body>
    <h1>Search Flights</h1>
    <form id="flight-search-form">
        <div class="airport-container">
            <label for="origin-input">Origin:</label>
            <input type="text" id="origin-input" name="origin" required>
            <div id="origin-list-container">
                <h2>Select an Airport</h2>
                <input type="text" id="origin-search" placeholder="Search airports...">
                <div id="origin-list"></div>
            </div>
        </div>

        <div class="airport-container">
            <label for="destination-input">Destination:</label>
            <input type="text" id="destination-input" name="destination" required>
            <div id="destination-list-container">
                <h2>Select an Airport</h2>
                <input type="text" id="destination-search" placeholder="Search airports...">
                <div id="destination-list"></div>
            </div>
        </div>

        <label for="departure-date">Departure Date:</label>
        <input type="date" id="departure-date" name="departure-date" required>
        <button type="submit">Search Flights</button>
    </form>

    <script>
        const airports = [
           { name: "Los Angeles International Airport", code: "LAX" },
           { name: "John F. Kennedy International Airport", code: "JFK" },
           { name: "O'Hare International Airport", code: "ORD" },
           // ... Add more airports here
        ];

        function displayAirportList(airports, targetField) {
            const listContainerId = targetField === 'origin' ? 'origin-list' : 'destination-list';
            const airportList = document.getElementById(listContainerId);
            airportList.innerHTML = '';

            airports.forEach(airport => {
                const airportElement = document.createElement('div');
                airportElement.textContent = `${airport.name} (${airport.code})`;
                airportElement.setAttribute('data-airport-code', airport.code);
                airportElement.addEventListener('click', handleAirportSelection);
                airportList.appendChild(airportElement);
            });
        }

        function handleAirportSelection(event) {
            const selectedCode = event.target.getAttribute('data-airport-code');
            const targetFieldId = event.target.closest('.airport-container').querySelector('input').id;

            document.getElementById(targetFieldId).value = selectedCode;
            // Hide the corresponding airport list container
        }

        // Event Listeners for Search Fields
        document.querySelectorAll('.airport-container input[type="text"]').forEach(inputField => {
            inputField.addEventListener('click', () => {
                const listContainerId = inputField.id.replace('-input', '-list-container');
                document.getElementById(listContainerId).style.display = 'block';
            });

            const searchFieldId = inputField.id.replace('-input', '-search');
            document.getElementById(searchFieldId).addEventListener('input', (event) => {
                const searchTerm = event.target.value.toLowerCase();
                const targetField = inputField.id.includes('origin') ? 'origin' : 'destination';
                const filteredAirports = airports.filter(airport =>
                   airport.name.toLowerCase().includes(searchTerm) ||
                   airport.code.toLowerCase().includes(searchTerm)
                );
                displayAirportList(filteredAirports, targetField);
            });
        });
    </script>
</body>
</html>
